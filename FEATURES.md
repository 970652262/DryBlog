# DryBlog æ–°åŠŸèƒ½è¯´æ˜æ–‡æ¡£

æœ¬æ–‡æ¡£è®°å½•äº†é¡¹ç›®æœ€è¿‘æ·»åŠ çš„æ‰€æœ‰æ–°åŠŸèƒ½å’Œæ”¹è¿›ã€‚

## ğŸ¯ æ–°å¢åŠŸèƒ½åˆ—è¡¨

### 1. éª¨æ¶å±åŠ è½½åŠ¨ç”» (Skeleton Loading)
**æ–‡ä»¶**: `components/SkeletonLoading.tsx`

æä¾›äº†å¤šç§éª¨æ¶å±ç»„ä»¶ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼š
- `PostCardSkeleton` - æ–‡ç« å¡ç‰‡éª¨æ¶å±
- `PostListSkeleton` - æ–‡ç« åˆ—è¡¨éª¨æ¶å±
- `PostContentSkeleton` - æ–‡ç« å†…å®¹éª¨æ¶å±
- `SearchSkeleton` - æœç´¢ç»“æœéª¨æ¶å±

**ä½¿ç”¨æ–¹æ³•**:
```tsx
import { PostListSkeleton } from '@/components/SkeletonLoading';

<PostListSkeleton count={6} />
```

---

### 2. ä»£ç å—æ ·å¼ä¼˜åŒ–
**æ–‡ä»¶**: `app/globals.css`

æ”¹è¿›å†…å®¹ï¼š
- âœ… å¢å¼ºçš„è¯­æ³•é«˜äº®ï¼ˆæµ…è‰²/æ·±è‰²ä¸»é¢˜è‡ªé€‚åº”ï¼‰
- âœ… æ›´å¥½çš„å¯¹æ¯”åº¦ï¼Œä»£ç æ›´æ¸…æ™°æ˜“è¯»
- âœ… è¡Œå·æ ·å¼ä¼˜åŒ–ï¼Œå¸¦åˆ†éš”çº¿
- âœ… ä»£ç å—é¼ æ ‡æ‚¬åœé«˜äº®
- âœ… å†…è”ä»£ç æ ·å¼ç¾åŒ–
- âœ… è¯­è¨€æ ‡ç­¾æ˜¾ç¤º
- âœ… æ”¯æŒ GitHub é£æ ¼çš„ä»£ç å—æ ·å¼

**ç‰¹æ€§**:
- ä½¿ç”¨ Consolas/Monaco ç­‰ä¸“ä¸šç¼–ç¨‹å­—ä½“
- è¡Œé«˜ä¸º 1.75ï¼Œæ›´èˆ’é€‚çš„é˜…è¯»ä½“éªŒ
- ä»£ç å—è¾¹æ¡†å’Œé˜´å½±ä¼˜åŒ–
- å®Œç¾æ”¯æŒ Solidity è¯­è¨€é«˜äº®

---

### 3. æ–‡ç« æ ‡ç­¾ç³»ç»Ÿ (Tags)
**æ–‡ä»¶**:
- `types/tag.ts` - ç±»å‹å®šä¹‰
- `database-schema-tags.sql` - æ•°æ®åº“è¡¨ç»“æ„
- `components/TagSelector.tsx` - æ ‡ç­¾é€‰æ‹©å™¨
- `components/TagDisplay.tsx` - æ ‡ç­¾æ˜¾ç¤ºç»„ä»¶

**æ•°æ®åº“è¡¨**:
- `tags` - æ ‡ç­¾è¡¨
- `post_tags` - æ–‡ç« æ ‡ç­¾å…³è”è¡¨ï¼ˆå¤šå¯¹å¤šï¼‰

**åŠŸèƒ½**:
- âœ… åˆ›å»ºå’Œç®¡ç†æ ‡ç­¾
- âœ… æ ‡ç­¾é¢œè‰²è‡ªå®šä¹‰
- âœ… æ–‡ç« å¤šæ ‡ç­¾æ”¯æŒ
- âœ… æ ‡ç­¾æœç´¢åŠŸèƒ½
- âœ… æ ‡ç­¾é¡µé¢ï¼ˆæŒ‰æ ‡ç­¾æµè§ˆæ–‡ç« ï¼‰

**ä½¿ç”¨æ ‡ç­¾**:
1. åœ¨ Supabase ä¸­æ‰§è¡Œ `database-schema-tags.sql` åˆ›å»ºè¡¨ç»“æ„
2. åœ¨æ–‡ç« åˆ›å»º/ç¼–è¾‘é¡µé¢é€‰æ‹©æ ‡ç­¾
3. å¯ä»¥åŠ¨æ€åˆ›å»ºæ–°æ ‡ç­¾

**RLS ç­–ç•¥**:
- æ‰€æœ‰ç”¨æˆ·å¯ä»¥æŸ¥çœ‹æ ‡ç­¾
- åªæœ‰ç®¡ç†å‘˜å¯ä»¥åˆ›å»º/ç¼–è¾‘/åˆ é™¤æ ‡ç­¾
- æ–‡ç« ä½œè€…å¯ä»¥ä¸ºè‡ªå·±çš„æ–‡ç« æ·»åŠ æ ‡ç­¾

---

### 4. å…¨å±€æœç´¢åŠŸèƒ½ (Global Search)
**æ–‡ä»¶**: `components/GlobalSearch.tsx`

**å¿«æ·é”®**: `Ctrl+K` æˆ– `Cmd+K`

**åŠŸèƒ½**:
- âœ… å®æ—¶æœç´¢æ–‡ç« æ ‡é¢˜ã€å†…å®¹ã€æ‘˜è¦
- âœ… æœç´¢æ ‡ç­¾
- âœ… é˜²æŠ–ä¼˜åŒ–ï¼ˆ300msï¼‰
- âœ… é”®ç›˜å¿«æ·é”®æ”¯æŒ
- âœ… ç‚¹å‡»å¤–éƒ¨å…³é—­
- âœ… ESC é”®å…³é—­
- âœ… æœç´¢ç»“æœé«˜äº®
- âœ… éª¨æ¶å±åŠ è½½çŠ¶æ€

**æœç´¢èŒƒå›´**:
- æ–‡ç« æ ‡é¢˜ã€å†…å®¹ã€æ‘˜è¦
- æ ‡ç­¾åç§°
- åªæœç´¢å·²å‘å¸ƒçš„å…¬å¼€å†…å®¹

---

### 5. è‰ç¨¿è‡ªåŠ¨ä¿å­˜ (Auto-Save)
**æ–‡ä»¶**: `hooks/useAutoSave.ts`

**åŠŸèƒ½**:
- âœ… è‡ªåŠ¨ä¿å­˜è‰ç¨¿ï¼ˆ5ç§’å»¶è¿Ÿï¼‰
- âœ… é˜²æŠ–å¤„ç†ï¼Œé¿å…é¢‘ç¹ä¿å­˜
- âœ… æ˜¾ç¤ºä¿å­˜çŠ¶æ€å’Œæ—¶é—´
- âœ… ä¿å­˜å¤±è´¥æç¤º
- âœ… è‡ªåŠ¨åˆ›å»º/æ›´æ–°è‰ç¨¿

**ä½¿ç”¨æ–¹æ³•**:
```tsx
const { isSaving, lastSaved, debouncedSave, triggerSave } = useAutoSave({
  delay: 5000,
  enabled: true,
  onSave: async () => {
    // ä¿å­˜é€»è¾‘
  }
});
```

**UI æ˜¾ç¤º**:
- ä¿å­˜ä¸­ï¼šæ˜¾ç¤ºæ—‹è½¬å›¾æ ‡ + "ä¿å­˜ä¸­..."
- ä¿å­˜å®Œæˆï¼šæ˜¾ç¤ºæ—¶é’Ÿå›¾æ ‡ + "ä¸Šæ¬¡ä¿å­˜: HH:MM:SS"

---

### 6. è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ– (Virtual Scrolling)
**æ–‡ä»¶**: `components/VirtualizedPostList.tsx`

**åº“**: `react-virtuoso`

**åŠŸèƒ½**:
- âœ… å¤§æ•°æ®é‡æ¸²æŸ“ä¼˜åŒ–ï¼ˆ>50ç¯‡æ–‡ç« æ—¶å¯ç”¨ï¼‰
- âœ… æ— é™æ»šåŠ¨åŠ è½½
- âœ… å®æ—¶æ•°æ®æ›´æ–°
- âœ… æ€§èƒ½ä¼˜åŒ–ï¼Œæµç•…çš„ç”¨æˆ·ä½“éªŒ

**å·¥ä½œåŸç†**:
- æ–‡ç« æ•°é‡ â‰¤50ï¼šä½¿ç”¨æ™®é€šç½‘æ ¼å¸ƒå±€
- æ–‡ç« æ•°é‡ >50ï¼šè‡ªåŠ¨åˆ‡æ¢åˆ°è™šæ‹Ÿæ»šåŠ¨
- é¢„åŠ è½½ 200px ä»¥æå‰æ¸²æŸ“
- åˆ†é¡µåŠ è½½ï¼Œæ¯æ¬¡15æ¡

---

### 7. æ•´ä½“ UI ä¼˜åŒ–

#### æ”¹è¿›çš„æ ·å¼
- âœ… æ›´å¥½çš„æ·±è‰²æ¨¡å¼æ”¯æŒ
- âœ… è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼
- âœ… å¹³æ»‘æ»šåŠ¨æ•ˆæœ
- âœ… é€‰ä¸­æ–‡æœ¬é«˜äº®ï¼ˆå“ç‰Œè‰²ï¼‰
- âœ… ç„¦ç‚¹æ ·å¼ä¼˜åŒ–
- âœ… æ·¡å…¥åŠ¨ç”»
- âœ… è„‰å†²åŠ è½½åŠ¨ç”»

#### Prose æ ·å¼å¢å¼º
- æ ‡é¢˜ã€æ®µè½ã€é“¾æ¥æ ·å¼ä¼˜åŒ–
- å¼•ç”¨å—æ ·å¼ç¾åŒ–
- è¡¨æ ¼æ ·å¼å®Œå–„
- åˆ—è¡¨é¡¹æ ·å¼ç»Ÿä¸€

#### äº¤äº’æ”¹è¿›
- æŒ‰é’®æ‚¬åœæ•ˆæœ
- å¡ç‰‡æ‚¬åœåŠ¨ç”»ï¼ˆ-translate-y-1ï¼‰
- å¯¼èˆªé“¾æ¥ä¸‹åˆ’çº¿åŠ¨ç”»
- å¹³æ»‘çš„é¢œè‰²è¿‡æ¸¡

---

## ğŸ“¦ æ–°å¢ä¾èµ–

```json
{
  "react-virtuoso": "^5.x",
  "@tanstack/react-virtual": "^3.x"
}
```

**å®‰è£…å‘½ä»¤**:
```bash
npm install react-virtuoso @tanstack/react-virtual --legacy-peer-deps
```

---

## ğŸ—„ï¸ æ•°æ®åº“è¿ç§»

### æ‰§è¡Œæ ‡ç­¾è¡¨åˆ›å»º
åœ¨ Supabase SQL Editor ä¸­æ‰§è¡Œï¼š

```sql
-- æ‰§è¡Œ database-schema-tags.sql ä¸­çš„æ‰€æœ‰ SQL è¯­å¥
```

**åŒ…å«çš„è¡¨**:
1. `tags` - æ ‡ç­¾è¡¨
2. `post_tags` - æ–‡ç« æ ‡ç­¾å…³è”è¡¨

**åŒ…å«çš„ RLS ç­–ç•¥**:
- å…¬å¼€è¯»å–æƒé™
- ç®¡ç†å‘˜å†™å…¥æƒé™
- ä½œè€…å¯ä»¥ä¸ºè‡ªå·±çš„æ–‡ç« æ·»åŠ æ ‡ç­¾

---

## ğŸ¨ UI/UX æ”¹è¿›æ€»ç»“

### åŠ è½½ä½“éªŒ
- éª¨æ¶å±å–ä»£ä¼ ç»Ÿçš„ Loading æ–‡å­—
- è‡ªåŠ¨ä¿å­˜çŠ¶æ€å®æ—¶æ˜¾ç¤º
- æœç´¢åŠ è½½çŠ¶æ€å¯è§†åŒ–

### äº¤äº’ä½“éªŒ
- å…¨å±€æœç´¢å¿«æ·é”® (Ctrl+K)
- è™šæ‹Ÿæ»šåŠ¨æå‡å¤§åˆ—è¡¨æ€§èƒ½
- æ ‡ç­¾é¢œè‰²å¯è§†åŒ–
- ä»£ç å—è¯­è¨€æ ‡ç­¾æ˜¾ç¤º

### è§†è§‰ä¼˜åŒ–
- ä»£ç å—å¯¹æ¯”åº¦å¢å¼º
- æ·±è‰²æ¨¡å¼å®Œå–„
- åŠ¨ç”»æ•ˆæœç»Ÿä¸€
- æ»šåŠ¨æ¡ç¾åŒ–

---

## ğŸš€ ä½¿ç”¨å»ºè®®

### 1. é¦–æ¬¡ä½¿ç”¨
1. æ‰§è¡Œæ•°æ®åº“è¿ç§»è„šæœ¬
2. åˆ›å»ºå‡ ä¸ªå¸¸ç”¨æ ‡ç­¾ï¼ˆå¦‚ï¼šå‰ç«¯ã€åç«¯ã€Solidityã€æ•™ç¨‹ç­‰ï¼‰
3. å°è¯•ä½¿ç”¨ Ctrl+K æœç´¢åŠŸèƒ½
4. åˆ›å»ºæ–‡ç« æ—¶æµ‹è¯•è‡ªåŠ¨ä¿å­˜

### 2. å†…å®¹åˆ›ä½œ
- ä¸ºæ–‡ç« æ·»åŠ åˆé€‚çš„æ ‡ç­¾ï¼ˆå»ºè®® 2-5 ä¸ªï¼‰
- ä½¿ç”¨æœç´¢åŠŸèƒ½å¿«é€Ÿæ‰¾åˆ°å†å²æ–‡ç« 
- åˆ©ç”¨è‡ªåŠ¨ä¿å­˜åŠŸèƒ½ï¼Œä¸ç”¨æ‹…å¿ƒå†…å®¹ä¸¢å¤±
- ä½¿ç”¨ä¼˜åŒ–çš„ä»£ç å—å±•ç¤ºä»£ç 

### 3. æ€§èƒ½ä¼˜åŒ–
- æ–‡ç« æ•°é‡è¾ƒå¤šæ—¶ï¼Œè™šæ‹Ÿæ»šåŠ¨ä¼šè‡ªåŠ¨å¯ç”¨
- æœç´¢ä½¿ç”¨é˜²æŠ–ï¼Œé¿å…é¢‘ç¹è¯·æ±‚
- éª¨æ¶å±æå‡æ„ŸçŸ¥æ€§èƒ½

---

## ğŸ› å·²çŸ¥é—®é¢˜å’Œé™åˆ¶

1. **è™šæ‹Ÿæ»šåŠ¨**: åªåœ¨æ–‡ç« æ•°é‡ >50 æ—¶å¯ç”¨
2. **è‡ªåŠ¨ä¿å­˜**: éœ€è¦ç”¨æˆ·å·²ç™»å½•ä¸”æ ‡é¢˜ä¸ä¸ºç©º
3. **æ ‡ç­¾ç®¡ç†**: ç›®å‰åªæœ‰ç®¡ç†å‘˜å¯ä»¥åˆ é™¤æ ‡ç­¾
4. **æœç´¢**: ä»…æœç´¢å·²å‘å¸ƒçš„å…¬å¼€å†…å®¹

---

## ğŸ“ åç»­è®¡åˆ’

- [ ] æ ‡ç­¾é¡µé¢å®ç°ï¼ˆæŒ‰æ ‡ç­¾æµè§ˆæ–‡ç« ï¼‰
- [ ] æ ‡ç­¾ç®¡ç†åå°
- [ ] æœç´¢ç»“æœé«˜äº®å…³é”®è¯
- [ ] æ–‡ç« è®¿é—®ç»Ÿè®¡
- [ ] è¯„è®ºç³»ç»Ÿ
- [ ] å›¾ç‰‡ä¼˜åŒ–ï¼ˆNext.js Imageï¼‰
- [ ] PWA æ”¯æŒ

---

## ğŸ’¡ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Next.js 14 (App Router)
- **æ ·å¼**: Tailwind CSS
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **çŠ¶æ€ç®¡ç†**: React Hooks
- **è™šæ‹Ÿæ»šåŠ¨**: React Virtuoso
- **ä»£ç é«˜äº®**: Highlight.js + highlightjs-solidity
- **Markdown**: Marked + DOMPurify

---

## ğŸ“š ç›¸å…³æ–‡ä»¶ç´¢å¼•

### ç»„ä»¶
- `components/SkeletonLoading.tsx` - éª¨æ¶å±
- `components/GlobalSearch.tsx` - å…¨å±€æœç´¢
- `components/TagSelector.tsx` - æ ‡ç­¾é€‰æ‹©å™¨
- `components/TagDisplay.tsx` - æ ‡ç­¾æ˜¾ç¤º
- `components/VirtualizedPostList.tsx` - è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨

### Hooks
- `hooks/useAutoSave.ts` - è‡ªåŠ¨ä¿å­˜é’©å­

### ç±»å‹å®šä¹‰
- `types/tag.ts` - æ ‡ç­¾ç±»å‹
- `types/post.ts` - æ–‡ç« ç±»å‹ï¼ˆå·²æ›´æ–°æ”¯æŒæ ‡ç­¾ï¼‰

### æ•°æ®åº“
- `database-schema-tags.sql` - æ ‡ç­¾è¡¨ç»“æ„

### æ ·å¼
- `app/globals.css` - å…¨å±€æ ·å¼ï¼ˆå¤§å¹…ä¼˜åŒ–ï¼‰

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

å¦‚éœ€æ·»åŠ æ–°åŠŸèƒ½æˆ–æŠ¥å‘Šé—®é¢˜ï¼Œè¯·ï¼š
1. åˆ›å»º Issue æè¿°é—®é¢˜æˆ–éœ€æ±‚
2. Fork é¡¹ç›®å¹¶åˆ›å»ºåˆ†æ”¯
3. æäº¤ Pull Request

---

**æ›´æ–°æ—¥æœŸ**: 2025-12-09
**ç‰ˆæœ¬**: v1.1.0
